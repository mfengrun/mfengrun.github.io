---
layout:     post                    # 使用的布局（不需要改）
title:      SQL 初探               # 标题 
subtitle:   数据分析课程笔记            #副标题
date:       2018-10-07              # 时间
author:     Fengrun                      # 作者
header-img: img/201802.jpg         #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 数据分析
---

# 数据分析（入门）

## SQL初探

### 项目准备：SQL 和移动平均值

**实体关系图**

![](http://ww1.sinaimg.cn/large/0068KeAVgy1fvzvqqq1hej30vg0j00xb.jpg)

![](http://ww1.sinaimg.cn/large/0068KeAVgy1fvzvr0l3czj30nd0c6dhq.jpg)



（1）可以将数据库理解为堆在一个地方的一堆 Excel 表格。

对数据库的结构化查询语言：SQL。

（2）使用**传统关系数据库**与 SQL 交互有一些主要优点。最明显的 5 个优点是：

- SQL 很容易理解。
- 传统的数据库允许我们直接访问数据。
- 传统的数据库可使我们审核和复制数据。
- SQL 是一个可一次分析多个表的很好工具。
- 相对于 Google Analytics 等仪表板工具，SQL 可使我们分析更复杂的问题。

（3）SQL 的关键是理解**语句**。这几个语句包括：

1. **CREATE TABLE** 是一个在数据库中创建新表的语句。
2. **DROP TABLE** 是删除数据库中表的语句。
3. **SELECT** 读取并显示数据。我们将这称为**查询**。

大多数数据分析工作仅仅用到 SELECT 语句，即查询语句。

**SELECT 和 FROM**

```
SELECT *
FROM orders;
```

以上的代码是表示从 orders 中返回所有列，

`*` 表示返回所有列

![](http://ww1.sinaimg.cn/large/0068KeAVgy1fvzvbuf495j30w20e8myc.jpg)

![](http://ww1.sinaimg.cn/large/0068KeAVgy1fvzvchuhhpj30ys0gwmys.jpg)

**每一个SQL查询**

每个查询至少有一个 **SELECT** 和 **FROM** 语句。 **SELECT** 语句用于放置要显示数据的**列**。**FROM** 语句用于放置要从中提取数据的**表**。

![](http://ww1.sinaimg.cn/large/0068KeAVgy1fvzvhmtno0j30x70h240q.jpg)

**规定查询格式**

- 大写
  你可能已经注意到，我们大写了 SELECT 和 FROM，而将表和列名称小写。这是一个常见的格式惯例。大写命令（SELECT、FROM），小写查询中的其他内容是常见做法。

- 表和变量名中不需要空格
  通常在列名中使用下划线，避免使用空格。

- 在查询中使用空格

  SQL 查询忽略空格，因此可以根据需要在代码之间添加尽可能多的空格和空行，并且查询结果是相同的。我们来看下面这个查询

```
SELECT account_id FROM orders
```

等价于这个查询:

```
SELECT account_id
FROM orders
```

和这个查询（但是永远不要这样写）:

```
SELECT              account_id

FROM               orders
```

- 分号

  根据 SQL 环境，查询结尾可能需要一个执行的分号。 这个"要求"在其他环境中比较灵活。我们认为在每个语句的末尾添加一个分号是最好的做法，如果环境能够一次显示多个结果，那么这样做还可以一次运行多个命令。

**LIMIT**

我们已经学习了 SELECT（选择列）和 FROM（选择表）语句。如果想要查看表的前几行时，LIMIT 语句就能派上用场。这可比加载整个数据集要快得多。

LIMIT 命令始终是查询的最后一部分。下面的例子仅显示订单表的前 10 行和所有列：

```
SELECT *
FROM orders
LIMIT 10;
```

